<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>default_context - graph-api</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../../favicon.svg">
        <link rel="shortcut icon" href="../../../favicon.png">
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        <link rel="stylesheet" href="../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../../../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../../../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../../theme/custom.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../../../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">graph-api</h1>

                    <div class="right-buttons">
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/BrynCooke/graph-api" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="default-context"><a class="header" href="#default-context">Default Context</a></h1>
<p>The <code>push_default_context</code> step provides a simplified way to track vertex and edge information during traversal, without
having to define custom context types. It automatically captures the current vertex or edge to make it available in
downstream steps.</p>
<object type="image/svg+xml" data="default_context/image.svg" title="Push Default Context Step Diagram">
Default Context step diagram showing the context automatically tracking the current element
</object>
<p>In this diagram:</p>
<ul>
<li>An <strong>Input Stream</strong> contains elements <strong>A</strong> and <strong>B</strong>.</li>
<li>The <strong><code>.push_default_context()</code></strong> step is applied.</li>
<li>In the <strong>Output Stream</strong>, each element is paired with a context that automatically contains <em>that specific element</em>.
<ul>
<li>Element <strong>A</strong> is paired with <code>Context: A</code>.</li>
<li>Element <strong>B</strong> is paired with <code>Context: B</code>.</li>
</ul>
</li>
<li>This shows how the default context dynamically reflects the current element being processed.</li>
</ul>
<h2 id="syntax"><a class="header" href="#syntax">Syntax</a></h2>
<pre><code class="language-rust noplayground">walker.push_default_context()</code></pre>
<h2 id="parameters"><a class="header" href="#parameters">Parameters</a></h2>
<p>This step takes no parameters.</p>
<h2 id="return-value"><a class="header" href="#return-value">Return Value</a></h2>
<p>Returns a new walker with the default context added, preserving the current traversal position.</p>
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<h3 id="tracking-relationships"><a class="header" href="#tracking-relationships">Tracking Relationships</a></h3>
<p>Use default context to describe relationships between people:</p>
<pre><code class="language-rust noplayground">pub fn default_context_example&lt;G&gt;(graph: &amp;G, bryn_id: G::VertexId, julia_id: G::VertexId)
where
    G: Graph&lt;Vertex = Vertex, Edge = Edge&gt;,
{
    // Use default context to access vertex information directly from prior in the traversal
    let knows = graph
        .walk()
        .vertices_by_id(vec![bryn_id, julia_id])
        .push_default_context()
        .edges(EdgeSearch::scan().outgoing())
        .filter_follows()
        .head()
        .map(|target_vertex, ctx| {
            // Access source person name from context
            let source_name = match ctx.vertex() {
                Vertex::Person { name, .. } =&gt; name.clone(),
                _ =&gt; "Unknown".to_string(),
            };

            // Access target person name from vertex
            let person = target_vertex.project::&lt;Person&lt;_&gt;&gt;().unwrap();

            format!("{} knows {}", source_name, person.name())
        })
        .collect::&lt;Vec&lt;_&gt;&gt;();

    // Check the results
    println!("Relationships found:");
    for relationship in &amp;knows {
        println!("- {}", relationship);
    }
}</code></pre>
<h3 id="working-with-edge-properties"><a class="header" href="#working-with-edge-properties">Working with Edge Properties</a></h3>
<p>Combine edge properties with source vertex information:</p>
<pre><code class="language-rust noplayground">pub fn edge_properties_example&lt;G&gt;(graph: &amp;G, person_id: G::VertexId)
where
    G: Graph&lt;Vertex = Vertex, Edge = Edge&gt;,
{
    // Find relationships with metadata
    let relationships = graph
        .walk()
        .vertices_by_id(vec![person_id])
        .push_default_context()
        .edges(EdgeSearch::scan().outgoing())
        .map(|edge, ctx| {
            // Get the source person's name
            let source_name = match ctx.vertex() {
                Vertex::Person { name, .. } =&gt; name.clone(),
                _ =&gt; "Unknown".to_string(),
            };

            // Format based on edge type
            match edge.weight() {
                Edge::Follows =&gt; {
                    format!("{} follows someone", source_name)
                }
                Edge::Created =&gt; {
                    format!("{} created something", source_name)
                }
                Edge::Liked { timestamp } =&gt; {
                    format!("{} liked something at {}", source_name, timestamp)
                }
                Edge::Commented { timestamp } =&gt; {
                    format!("{} commented on something at {}", source_name, timestamp)
                }
            }
        })
        .collect::&lt;Vec&lt;_&gt;&gt;();

    println!("Person relationships with metadata:");
    for rel in relationships {
        println!("- {}", rel);
    }
}</code></pre>
<h2 id="default-context-structure"><a class="header" href="#default-context-structure">Default Context Structure</a></h2>
<p>The default context automatically tracks:</p>
<ul>
<li>For vertices: The current vertex reference</li>
<li>For edges: Both the source and target vertex references</li>
</ul>
<h2 id="accessing-default-context"><a class="header" href="#accessing-default-context">Accessing Default Context</a></h2>
<p>You can access the context in subsequent steps like this:</p>
<pre><code class="language-rust noplayground">// After pushing default context
walker
    .push_default_context()
    .map(|current_element, ctx| {
        // Access vertex from context
        let context_vertex = ctx.vertex();
        
        // Work with the context vertex
        // ...
    })</code></pre>
<h2 id="best-practices"><a class="header" href="#best-practices">Best Practices</a></h2>
<ul>
<li>Use default context for simple element tracking rather than creating custom context types</li>
<li>Chain default contexts in multi-step traversals to maintain element history</li>
<li>Access context values using the appropriate type-safe methods (e.g., <code>ctx.vertex()</code>, <code>ctx.edge()</code>)</li>
<li>Consider default context before writing complex custom context functions for basic traversals</li>
</ul>
<h2 id="common-use-cases"><a class="header" href="#common-use-cases">Common Use Cases</a></h2>
<ul>
<li><strong>Relationship description</strong>: Building natural language descriptions (e.g., "Person A knows Person B")</li>
<li><strong>Path tracking</strong>: Recording the sequence of vertices and edges in a traversal</li>
<li><strong>Element comparison</strong>: Comparing properties between current and previous elements</li>
<li><strong>Data collection</strong>: Gathering information from connected elements in the graph</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../user_guide/walker/steps/context.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../../user_guide/walker/steps/mutate_context.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../user_guide/walker/steps/context.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../../user_guide/walker/steps/mutate_context.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../../elasticlunr.min.js"></script>
        <script src="../../../mark.min.js"></script>
        <script src="../../../searcher.js"></script>

        <script src="../../../clipboard.min.js"></script>
        <script src="../../../highlight.js"></script>
        <script src="../../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
