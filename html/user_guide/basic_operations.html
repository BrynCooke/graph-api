<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Basic Operations - graph-api</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/custom.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">graph-api</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/BrynCooke/graph-api" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="basic-operations"><a class="header" href="#basic-operations">Basic Operations</a></h1>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>Once you've defined your graph model, you can perform basic operations like adding vertices and edges, querying the
graph, and modifying elements. This guide covers the fundamental operations available in Graph API.</p>
<h2 id="creating-a-graph"><a class="header" href="#creating-a-graph">Creating a Graph</a></h2>
<p>To start working with graphs, first create a new graph instance:</p>
<pre><code class="language-rust noplayground">        // Import the standard model and create a new graph
        let mut graph = SimpleGraph::&lt;Vertex, Edge&gt;::new();</code></pre>
<h2 id="adding-vertices"><a class="header" href="#adding-vertices">Adding Vertices</a></h2>
<p>Once you have a graph instance, you can add vertices to it:</p>
<pre><code class="language-rust noplayground">        // Add a person vertex
        let bryn = graph.add_vertex(Vertex::Person {
            name: "Bryn".to_string(),
            username: "bryn123".to_string(),
            biography: "Graph enthusiast".to_string(),
            age: 28,
        });

        // Add a project vertex
        let project = graph.add_vertex(Vertex::Project {
            name: "GraphAPI".to_string(),
        });

        // Add a comment vertex
        let comment = graph.add_vertex(Vertex::Comment {
            text: "Great project!".to_string(),
            date: "2023-05-15".to_string(),
        });</code></pre>
<h2 id="adding-edges"><a class="header" href="#adding-edges">Adding Edges</a></h2>
<p>Edges connect vertices in your graph:</p>
<pre><code class="language-rust noplayground">        // Add simple edges
        graph.add_edge(bryn, project, Edge::Created);
        graph.add_edge(julia, bryn, Edge::Follows);

        // Add edges with properties
        graph.add_edge(
            bryn,
            project,
            Edge::Liked {
                timestamp: "2023-01-15".to_string(),
            },
        );</code></pre>
<h2 id="querying-vertices"><a class="header" href="#querying-vertices">Querying Vertices</a></h2>
<p>You can query vertices using the walker API. Here are some examples:</p>
<h3 id="full-scan"><a class="header" href="#full-scan">Full Scan</a></h3>
<p>When you need to find all vertices in the graph:</p>
<pre><code class="language-rust noplayground">        // Get all vertices in the graph
        let all_vertices = graph
            .walk()
            .vertices() // Start with all vertices
            .collect::&lt;Vec&lt;_&gt;&gt;();

        // Count vertices by type using type-safe filters
        let person_count = graph
            .walk()
            .vertices()
            .filter_person() // Use generated helper method
            .count();

        let project_count = graph
            .walk()
            .vertices()
            .filter_project() // Use generated helper method
            .count();</code></pre>
<h3 id="label-based-lookup"><a class="header" href="#label-based-lookup">Label-Based Lookup</a></h3>
<p>For more efficient queries, use label-based indexes:</p>
<pre><code class="language-rust noplayground">        // Find all Person vertices using label index
        let all_people = graph
            .walk()
            .vertices()
            .filter_person() // Use generated helper for label filtering
            .collect::&lt;Vec&lt;_&gt;&gt;();

        // Find all Project vertices using label index
        let all_projects = graph
            .walk()
            .vertices()
            .filter_project() // Use generated helper for label filtering
            .collect::&lt;Vec&lt;_&gt;&gt;();</code></pre>
<h3 id="property-filtering"><a class="header" href="#property-filtering">Property Filtering</a></h3>
<p>Filter vertices based on their properties:</p>
<pre><code class="language-rust noplayground">        // Find people over 30 years old
        let older_people = graph
            .walk()
            .vertices()
            .filter_by_person(|person, _| {
                // Type-safe access to Person properties
                person.age() &gt; 30
            })
            .map(|v, _| {
                // Use type-safe projection and accessor methods
                let person = v.project::&lt;Person&lt;_&gt;&gt;().unwrap();
                format!("{} ({})", person.name(), person.age())
            })
            .collect::&lt;Vec&lt;_&gt;&gt;();

        // Find people with "programmer" in their biography
        let programmers = graph
            .walk()
            .vertices()
            .filter_by_person(|person, _| {
                // Type-safe access to Person properties
                person.biography().contains("programmer")
            })
            .map(|v, _| {
                // Use type-safe projection and accessor methods
                v.project::&lt;Person&lt;_&gt;&gt;().unwrap().name().to_string()
            })
            .collect::&lt;Vec&lt;_&gt;&gt;();</code></pre>
<h2 id="working-with-edges"><a class="header" href="#working-with-edges">Working with Edges</a></h2>
<p>The walker API also provides powerful tools for working with edges:</p>
<h3 id="finding-connected-edges"><a class="header" href="#finding-connected-edges">Finding Connected Edges</a></h3>
<p>Get all edges connected to a vertex:</p>
<pre><code class="language-rust noplayground">            // Get all edges connected to a specific vertex
            let connected_edges = graph
                .walk()
                .vertices_by_id(vec![person_id])
                .edges(EdgeSearch::scan()) // Get all connected edges
                .collect::&lt;Vec&lt;_&gt;&gt;();</code></pre>
<h3 id="directional-edge-queries"><a class="header" href="#directional-edge-queries">Directional Edge Queries</a></h3>
<p>Specify whether you want incoming or outgoing edges:</p>
<pre><code class="language-rust noplayground">            // Get only outgoing edges
            let outgoing_edges = graph
                .walk()
                .vertices_by_id(vec![person_id])
                .edges(EdgeSearch::scan().outgoing()) // Only outgoing edges
                .collect::&lt;Vec&lt;_&gt;&gt;();

            // Get only incoming edges
            let incoming_edges = graph
                .walk()
                .vertices_by_id(vec![person_id])
                .edges(EdgeSearch::scan().incoming()) // Only incoming edges
                .collect::&lt;Vec&lt;_&gt;&gt;();</code></pre>
<h3 id="label-based-edge-filtering"><a class="header" href="#label-based-edge-filtering">Label-Based Edge Filtering</a></h3>
<p>Filter edges by their label:</p>
<pre><code class="language-rust noplayground">        // Find all "Created" edges in the graph
        let creation_edges = graph
            .walk()
            .edges(EdgeSearch::scan())
            .filter_created() // Type-safe filter using generated helper
            .collect::&lt;Vec&lt;_&gt;&gt;();

        // Find all "Follows" edges in the graph
        let follow_edges = graph
            .walk()
            .edges(EdgeSearch::scan())
            .filter_follows() // Type-safe filter using generated helper
            .collect::&lt;Vec&lt;_&gt;&gt;();

        // Find all edges with timestamp properties
        let timestamped_edges = graph
            .walk()
            .edges(EdgeSearch::scan())
            .filter(|e, _| match e.weight() {
                Edge::Liked { timestamp } =&gt; true,
                Edge::Commented { timestamp } =&gt; true,
                _ =&gt; false,
            })
            .collect::&lt;Vec&lt;_&gt;&gt;();</code></pre>
<h2 id="modifying-the-graph"><a class="header" href="#modifying-the-graph">Modifying the Graph</a></h2>
<p>You can modify the graph during traversal using the mutation API:</p>
<h3 id="updating-vertex-properties"><a class="header" href="#updating-vertex-properties">Updating Vertex Properties</a></h3>
<pre><code class="language-rust noplayground">        // Update all Person vertices to increment their age
        let updated_count = graph
            .walk_mut()
            .vertices()
            .filter_person() // Type-safe filter using generated helper
            .mutate(|v| {
                // Type-safe mutation using projection
                if let Some(mut person) = v.project_mut::&lt;Person&lt;_&gt;&gt;() {
                    // Update the age property
                    let current_age = person.age();
                    person.set_age(current_age + 1);
                    true // Indicate that we modified the vertex
                } else {
                    false // No modification
                }
            });

        // Add a property to a specific person
        graph
            .walk_mut()
            .vertices()
            .filter_by_person(|p, _| p.username() == "bryn123")
            .mutate(|v| {
                // Type-safe mutation using projection
                if let Some(mut person) = v.project_mut::&lt;Person&lt;_&gt;&gt;() {
                    // Update the biography property
                    person.set_biography("Updated biography: Graph API expert");
                    true // Indicate that we modified the vertex
                } else {
                    false // No modification
                }
            });</code></pre>
<h3 id="verifying-changes"><a class="header" href="#verifying-changes">Verifying Changes</a></h3>
<p>After modification, you can verify the changes:</p>
<pre><code class="language-rust noplayground">        // Check that Bryn's biography was updated
        let updated_bio = graph
            .walk()
            .vertices()
            .filter_by_person(|p, _| p.username() == "bryn123")
            .map(|v, _| {
                // Type-safe access using projection
                v.project::&lt;Person&lt;_&gt;&gt;().unwrap().biography().to_string()
            })
            .first();

        // Verify all people are now older
        let all_ages = graph
            .walk()
            .vertices()
            .filter_person() // Type-safe filter using generated helper
            .map(|v, _| {
                // Type-safe access using projection
                let person = v.project::&lt;Person&lt;_&gt;&gt;().unwrap();
                (person.name().to_string(), person.age())
            })
            .collect::&lt;Vec&lt;_&gt;&gt;();</code></pre>
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<p>Now that you understand the basic operations, you can:</p>
<ol>
<li>Learn about <a href="./traversal.html">Advanced Traversals</a> using the Walker API</li>
<li>Explore <a href="./walker/context_system.html">Context and State</a> in graph traversals</li>
<li>See <a href="./walker/steps.html">Examples of Walker Steps</a> to build more complex queries</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../user_guide/derive_macros.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../user_guide/traversal.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../user_guide/derive_macros.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../user_guide/traversal.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
