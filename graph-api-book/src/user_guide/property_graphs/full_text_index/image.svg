<?xml-stylesheet type="text/css" href="/theme/custom.css"?>
<svg viewBox="0 0 700 350" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <!-- Removed width/height -->
    <title>Full-Text Index Example</title>
    <desc>Diagram showing a full-text index on the 'description' property. It maps processed words (tokens) like 'fast',
        'graph', 'library', 'traversal' to the vertices (A, B, C) containing them. Highlights a query for the word
        'traversal'.
    </desc>
    <defs>
        <!-- Arrowheads -->
        <marker id="arrowhead" class="marker-arrowhead" markerWidth="8" markerHeight="6"
                refX="7" refY="3" orient="auto" markerUnits="strokeWidth">
            <path d="M0,0 L8,3 L0,6 Z"/>
        </marker>
        <marker id="arrowhead-pointer" class="marker-arrowhead-pointer" markerWidth="8" markerHeight="6"
                refX="7" refY="3" orient="auto" markerUnits="strokeWidth">
            <path d="M0,0 L8,3 L0,6 Z"/>
        </marker>
    </defs>

    <!-- === Index Structure === -->
    <g id="index" class="index-container" transform="translate(20, 40)">
        <rect class="index-box" x="0" y="0" width="240" height="260"/>
        <text class="index-title" x="120" y="25">Full-Text Index (on 'description')</text>
        <line class="index-divider" x1="0" y1="45" x2="240" y2="45"/>
        <line class="index-divider" x1="115" y1="45" x2="115" y2="260"/>
        <g class="index-entry" id="idx-efficient" transform="translate(0, 70)">
            <text class="index-token" x="105" y="0">'efficient'</text>
            <text class="index-value" x="125" y="0">[ C ]</text>
        </g>
        <g class="index-entry" id="idx-fast" transform="translate(0, 100)">
            <text class="index-token" x="105" y="0">'fast'</text>
            <text class="index-value" x="125" y="0">[ A ]</text>
        </g>
        <g class="index-entry" id="idx-graph" transform="translate(0, 130)">
            <text class="index-token" x="105" y="0">'graph'</text>
            <text class="index-value" x="125" y="0">[ A, B ]</text>
        </g>
        <g class="index-entry" id="idx-library" transform="translate(0, 160)">
            <text class="index-token" x="105" y="0">'library'</text>
            <text class="index-value" x="125" y="0">[ A, B ]</text>
        </g>
        <g class="index-entry highlighted" id="idx-traversal" transform="translate(0, 190)">
            <text class="index-token" x="105" y="0">'traversal'</text>
            <text class="index-value" x="125" y="0">[ B, C ]</text>
        </g>
        <rect class="query-highlight-box" x="10" y="178" width="220" height="25"/>
    </g>

    <!-- === Graph Structure === -->
    <g id="graph" transform="translate(340, 50)">
        <!-- Nodes - Using single <text> for properties -->
        <g class="node" id="node-A" transform="translate(100, 50)">
            <circle r="20"></circle>
            <text class="node-label">A</text>
            <!-- Single text element for property -->
            <text class="property-text" y="28">
                {description: "Fast graph library"}
            </text>
        </g>
        <g class="node highlighted" id="node-B" transform="translate(320, 100)">
            <circle r="20"></circle>
            <text class="node-label">B</text>
            <!-- Single text element for property -->
            <text class="property-text" y="28">
                {description: "Library for graph traversal"}
            </text>
        </g>
        <g class="node highlighted" id="node-C" transform="translate(100, 200)">
            <circle r="20"></circle>
            <text class="node-label">C</text>
            <!-- Single text element for property -->
            <text class="property-text" y="28">
                {description: "Efficient traversal..."}
            </text>
        </g>

        <!-- Edges -->
        <g class="edge" id="edge-A-B">
            <path d="M 120 55 Q 220 65 300 95"/>
        </g>
        <g class="edge" id="edge-B-C">
            <path d="M 300 105 Q 200 140 120 195"/>
        </g>
    </g>

    <!-- === Index Pointers === -->
    <g id="index-pointers">
        <line class="index-pointer" x1="185" y1="110" x2="415" y2="250"/>
        <line class="index-pointer" x1="185" y1="140" x2="415" y2="100"/>
        <line class="index-pointer" x1="205" y1="170" x2="415" y2="100"/>
        <line class="index-pointer" x1="205" y1="170" x2="635" y2="150"/>
        <line class="index-pointer" x1="205" y1="200" x2="415" y2="100"/>
        <line class="index-pointer" x1="205" y1="200" x2="635" y2="150"/>
        <line class="index-pointer" x1="205" y1="230" x2="635" y2="150"/>
        <line class="index-pointer" x1="205" y1="230" x2="415" y2="250"/>
    </g>

    <!-- === Query Text === -->
    <text class="query-text" x="140" y="320">Query: description CONTAINS 'traversal'</text>

</svg>
