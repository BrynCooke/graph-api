<?xml-stylesheet type="text/css" href="/theme/custom.css"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 320"> <!-- Removed width/height -->
    <defs>
        <marker id="arrowhead" class="marker-arrowhead marker-base" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
            <path d="M 0 0 L 10 5 L 0 10 z" />
        </marker>
        <marker id="arrowhead-pointer" class="marker-arrowhead-pointer marker-base" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
            <path d="M 0 0 L 10 5 L 0 10 z" />
        </marker>
    </defs>
    <text x="10" y="25" class="step-label halo">Walker Step: <tspan class="code">fold()</tspan></text>

    <!-- Walker State (Vertices) -->
    <text x="150" y="50" class="text-color-muted" text-anchor="middle">Traversal Elements</text> <!-- Adjusted Y -->
    <g class="node active" transform="translate(50, 100)">
        <circle r="15"></circle><text class="node-label">V1</text>
        <text class="property-text" y="25">(age: 30)</text> <!-- Adjusted Y -->
    </g>
    <g class="node active" transform="translate(150, 100)">
        <circle r="15"></circle><text class="node-label">V2</text>
        <text class="property-text" y="25">(age: 25)</text> <!-- Adjusted Y -->
    </g>
    <g class="node active" transform="translate(250, 100)">
        <circle r="15"></circle><text class="node-label">V3</text>
        <text class="property-text" y="25">(age: 40)</text> <!-- Adjusted Y -->
    </g>

    <!-- Accumulator Box -->
    <g transform="translate(150, 210)"> <!-- Adjusted Y -->
        <rect class="index-box" x="-100" y="-40" width="200" height="80" />
        <text class="index-title" y="-25">Accumulator (acc)</text>
        <text class="index-value range" y="0">Initial: 0</text>
        <text class="index-value range" y="15">V1: 0 + 30 = 30</text>
        <text class="index-value range" y="30">V2: 30 + 25 = 55</text>
    </g>

    <!-- Arrows to Accumulator -->
    <line class="scan-pointer" x1="50" y1="130" x2="50" y2="160" marker-end="none"/>
    <line class="scan-pointer" x1="50" y1="160" x2="100" y2="160" marker-end="url(#arrowhead-pointer)"/>
    <line class="scan-pointer" x1="150" y1="130" x2="150" y2="160" marker-end="url(#arrowhead-pointer)"/>
    <line class="scan-pointer" x1="250" y1="130" x2="250" y2="160" marker-end="none"/>
    <line class="scan-pointer" x1="200" y1="170" x2="250" y2="170" marker-end="url(#arrowhead-pointer)"/> <!-- Adjusted Y -->

    <!-- Final Result -->
    <g transform="translate(400, 210)"> <!-- Adjusted Y -->
        <rect class="index-box" x="-40" y="-20" width="80" height="40" />
        <text class="index-title" y="-5">Result</text>
        <text class="index-value range" y="15">95</text>
    </g>
    <line class="step-arrow" x1="250" y1="210" x2="360" y2="210" /> <!-- Adjusted Y -->
    <text x="300" y="240" class="text-color-muted" font-size="12px">Terminates Traversal</text> <!-- Adjusted Y -->

</svg>
