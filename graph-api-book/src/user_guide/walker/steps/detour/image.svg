<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/css" href="/theme/custom.css"?>
<svg viewBox="0 0 600 350" xmlns="http://www.w3.org/2000/svg">
    <title>Detour Step Diagram</title>
    <desc>
        Diagram illustrating the 'detour' step:
        - Shows the main walker path at vertex A.
        - The 'detour()' step initiates a sub-walker from A.
        - The sub-walker explores a different path (e.g., A -> D -> E).
        - The results of the sub-walker (e.g., vertex E) replace the original element (A) in the main path.
        - The main path continues from the detour results (E).
    </desc>
    <defs>
        <marker id="arrowhead" class="marker-arrowhead marker-base" markerWidth="8" markerHeight="6" refX="7" refY="3"
                orient="auto" markerUnits="strokeWidth">
            <path d="M0,0 L8,3 L0,6 Z"/>
        </marker>
        <marker id="arrowhead-pointer" class="marker-arrowhead-pointer marker-base" markerWidth="8" markerHeight="6"
                refX="7" refY="3" orient="auto" markerUnits="strokeWidth">
            <path d="M0,0 L8,3 L0,6 Z"/>
        </marker>
    </defs>

    <text x="300" y="30" class="step-label" text-anchor="middle">Walker Step:
        <tspan class="code">detour()</tspan>
    </text>

    <!-- Main Path Before Detour -->
    <text x="100" y="60" class="text-color-muted" text-anchor="middle">Main Path</text>
    <g class="node highlighted" transform="translate(100, 100)">
        <circle r="20"></circle>
        <text class="node-label">A</text>
    </g>
    <g class="node" transform="translate(200, 100)">
        <circle r="20"></circle>
        <text class="node-label">B</text>
    </g>
    <line class="edge directed path" x1="120" y1="100" x2="180" y2="100" marker-end="url(#arrowhead)"/>

    <!-- Detour Path -->
    <g transform="translate(350, 180)">
        <rect class="index-box" x="-120" y="-70" width="240" height="140" stroke-dasharray="5 3"/>
        <text class="index-title" y="-50">Detour Sub-Walker</text>
        <g class="node highlighted" transform="translate(-80, 0)">
            <circle r="20"></circle>
            <text class="node-label">A</text>
        </g>
        <g class="node" transform="translate(0, 0)">
            <circle r="20"></circle>
            <text class="node-label">D</text>
        </g>
        <g class="node highlighted" transform="translate(80, 0)">
            <circle r="20"></circle>
            <text class="node-label">E</text>
        </g>
        <line class="edge directed path" x1="-60" y1="0" x2="-20" y2="0" marker-end="url(#arrowhead)"/>
        <line class="edge directed path" x1="20" y1="0" x2="60" y2="0" marker-end="url(#arrowhead)"/>
        <text class="text-color-muted" y="50" font-size="12px" text-anchor="middle">e.g.,
            .edges().tail().edges().tail()
        </text>
    </g>
    <!-- Arrow into Detour -->
    <path class="step-arrow" d="M 100 120 q 75 60 130 60" fill="none" marker-end="url(#arrowhead-pointer)"/>
    <text x="180" y="160" class="text-color-muted" font-size="12px">detour(|sub| ...)</text>
    <!-- Arrow out of Detour -->
    <path class="step-arrow" d="M 430 250 q 50 0 70 -50" fill="none" marker-end="url(#arrowhead-pointer)"/>


    <!-- Main Path After Detour -->
    <text x="500" y="60" class="text-color-muted" text-anchor="middle">Main Path (Resumed)</text>
    <g class="node highlighted" transform="translate(500, 100)">
        <circle r="20"></circle>
        <text class="node-label">E</text>
    </g>
    <g class="node" transform="translate(500, 200)">
        <circle r="20"></circle>
        <text class="node-label">F</text>
    </g>
    <line class="edge directed path" x1="500" y1="120" x2="500" y2="180" marker-end="url(#arrowhead)"/>

    <!-- Link Before and After -->
    <text x="100" y="280" class="text-color-muted" font-size="12px" text-anchor="middle">Detour results (E) replace
        original element (A)
    </text>

</svg>
