<?xml-stylesheet type="text/css" href="/theme/custom.css"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 550 320"> <!-- Removed width/height -->
    <defs>
        <marker id="arrowhead" class="marker-arrowhead marker-base" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
            <path d="M 0 0 L 10 5 L 0 10 z" />
        </marker>
        <marker id="arrowhead-pointer" class="marker-arrowhead-pointer marker-base" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
            <path d="M 0 0 L 10 5 L 0 10 z" />
        </marker>
    </defs>
    <text x="10" y="25" class="step-label halo">Walker Step: <tspan class="code">detour()</tspan></text>

    <!-- Main Path Before Detour -->
    <text x="150" y="60" class="text-color-muted" text-anchor="middle">Main Path (at V1)</text>
    <g class="node active" transform="translate(150, 100)">
        <circle r="20"></circle><text class="node-label">V1</text>
    </g>
    <g class="node" transform="translate(250, 100)">
        <circle r="20"></circle><text class="node-label">V2</text>
    </g>
    <line class="edge directed" x1="170" y1="100" x2="230" y2="100" />

    <!-- Detour Path -->
    <g transform="translate(350, 160)"> <!-- Adjusted Y -->
        <rect class="index-box" x="-100" y="-50" width="200" height="100" stroke-dasharray="5 3"/>
        <text class="index-title" y="-30">Detour Sub-Walker</text>
        <g class="node active" transform="translate(-50, 10)">
             <circle r="15"></circle><text class="node-label">D1</text>
        </g>
        <g class="node" transform="translate(50, 10)">
             <circle r="15"></circle><text class="node-label">D2</text>
        </g>
        <line class="edge directed" x1="-35" y1="10" x2="35" y2="10" />
        <text class="text-color-muted" y="40" font-size="12px">e.g., .edges().head()</text>
    </g>
    <!-- Arrow into Detour -->
    <path class="step-arrow" d="M 150 120 q 50 40 100 40" fill="none" /> <!-- Adjusted curve -->
    <!-- Arrow out of Detour -->
    <path class="step-arrow" d="M 450 160 q 50 -40 0 -80" fill="none" /> <!-- Adjusted curve -->


    <!-- Main Path After Detour -->
     <text x="150" y="230" class="text-color-muted" text-anchor="middle">Main Path (Results from Detour)</text> <!-- Adjusted Y -->
    <g class="node active" transform="translate(150, 270)"> <!-- Adjusted Y -->
        <circle r="20"></circle><text class="node-label">D1</text>
    </g>
     <g class="node" transform="translate(250, 270)"> <!-- Adjusted Y -->
        <circle r="20"></circle><text class="node-label">?</text> <!-- Next step depends on detour result -->
    </g>
    <line class="edge directed" x1="170" y1="270" x2="230" y2="270" stroke-dasharray="3 3"/> <!-- Adjusted Y -->

    <!-- Link Before and After -->
    <line class="scan-pointer" x1="150" y1="120" x2="150" y2="250" marker-end="none" /> <!-- Adjusted Y -->
    <text x="170" y="180" class="text-color-muted" font-size="12px">Detour replaces</text> <!-- Adjusted Y -->
    <text x="170" y="195" class="text-color-muted" font-size="12px">current elements</text> <!-- Adjusted Y -->

</svg>
